!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("change-case"),require("diff")):"function"==typeof define&&define.amd?define(["exports","change-case","diff"],t):t((e||self).json2Type={},e.changeCase,e.diff)}(this,function(e,t,r){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=/*#__PURE__*/function(){function e(){this._cache=new Map,this._cache_r=new Map,this._unnameCount=0}var r=e.prototype;return r._printCache=function(){return this._cache_r.size>0?Array.from(this._cache_r.entries()).map(function(e){return"interface "+e[0]+e[1]}).join("\n"):""},r.parseToTypes=function(e,t){if(void 0===t&&(t="DefaultInterface"),"object"!=typeof e)throw TypeError('param "obj" must be an object, but got '+typeof e);return"interface "+t+this._parseObjectToTypes(e)+"\n"+this._printCache()},r._parseObjectToTypes=function(e){var t=this;return"{\n"+Object.entries(e).map(function(e){var r,n=e[1],a=(r=e[0]).match(/^\d/)||r.match(/[\u0000-#%-/:-@[-^`{-\u007f]/)?'"'+r+'"':r;return a+":"+t._typeof(n,a)}).join("\n")+"\n}"},r._printArrayType=function(e){for(var t,r,n=this,i=new Set,c=a(e);!(t=c()).done;)i.add(o(t.value));for(var u,f=a(e);!(u=f()).done;)i.add(o(u.value));if(1==i.size&&i.has("Object")){i.clear();for(var h,p=a(e);!(h=p()).done;)i.add(this._checkThenParseObject(h.value));var l=Array.from(i);if(1==i.size)r=l.join(" | ");else{for(var d=l.map(function(e){return n._cache_r.get(e)}),y=d[0],m=l[0],v=1;v<d.length;v++){var _=s(y,d[v]);if(!_)return"Array<"+(r=l.join(" | "))+">";y=_,m=m.concat(l[v])}for(var b=0;b<d.length;b++)this._cache.set(d[b],{name:m}),this._cache_r.delete(l[b]);this._cache_r.set(m,y),r=m}}else r=0===e.length?"unknown":Array.from(i).join(" | ");return"Array<"+r+">"},r._checkThenParseObject=function(e,r){if(e instanceof Array)return this._printArrayType(e);if(null!=e){if(r){var n=this._tryParseIdMap(e,r);if(n)return n}var a=this._parseObjectToTypes(e);if(a.match(/{\s*}/))return a;var i=this._cache.get(a);if(i)return i.name;for(var o,c=r?t.pascalCase(r.match(/^["']\d/)?"I"+r:r):this._defaultName();o=this._cache_r.get(c);){var s=u(o,a);if(s){this._cache.set(s,{name:c}),this._cache.set(o,{name:c}),this._cache.set(a,{name:c}),this._cache_r.set(c,s);break}c=c.concat("_")}return this._cache_r.set(c,a),this._cache.set(a,{name:c}),c}return"null"},r._tryParseIdMap=function(e,t){var r=this,n=t,a=Array.from(Object.keys(e));if(a.length>0&&a.every(function(e){return e.match(/^\d+$/)}))return"{[id:number]:"+Array.from(new Set(Object.values(e).map(function(e){return r._typeof(e,n)}))).join("|")+"}"},r._typeof=function(e,t){var r=typeof e;switch(r){case"object":return this._checkThenParseObject(e,t);case"undefined":case"boolean":case"number":case"string":return r;default:throw r+" isn't support yet."}},r._defaultName=function(){return"I"+this._unnameCount++},e}();function o(e){var t=typeof e;switch(t){case"object":return"Object";case"undefined":case"boolean":case"number":case"string":return t;default:throw t+" isn't support yet."}}var c=function(e){return e.startsWith("{")&&e.endsWith("}")};function u(e,t){if(c(e)&&c(t)){var r=f(e,t),n=r[0],a=r[1],i=r[2];if(n.length>=a.length+i.length)return h(n,a,i)}}var s=function(e,t){return h.apply(void 0,f(e,t))};function f(e,t){for(var n,i=[],o=[],c=[],u=a(r.diffLines(e.replaceAll(/^{|}/gm,""),t.replaceAll(/^{|}/gm,"")));!(n=u()).done;){var s=n.value;s.added?o.push.apply(o,p(s.value)):s.removed?c.push.apply(c,p(s.value)):i.push.apply(i,p(s.value))}return[i,o,c]}function h(e,t,r){for(var n,i=Object.fromEntries(r),o=a(t);!(n=o()).done;)if(i[n.value[0]])return;return"{\n"+[].concat([].concat(t,r).map(function(e){return e[0]+"?:"+e[1]}),e.map(function(e){return e[0]+":"+e[1]})).join("\n")+"\n}"}var p=function(e){return e.split("\n").filter(function(e){return""!=e}).map(function(e){return e.split(":")})};e.Json2Type=i,e.parseToTypes=function(e,t){return void 0===t&&(t="DefaultInterface"),(new i).parseToTypes(JSON.parse(e),t)}});
//# sourceMappingURL=index.umd.js.map
